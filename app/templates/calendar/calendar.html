{% extends "layout.html" %}

{% block title %}Teacher Availability{% endblock %}

{% block main %}
<div class="container mt-4">
  <h2>Availability for {{ teacher.name }} | ID: {{ teacher.id }}</h2>

  {% if not teacher.phone %}
    <div class="alert alert-warning" role="alert">
      <strong>Warning:</strong> Teacher has not provided a phone number. If you are the teacher, please go to 'Calendar' to update it.
    </div>
  {% else %}
  {% for day, slots in grouped_slots.items() %}
    <h4 class="mt-3">{{ day.strftime("%A, %d %B %Y") }}</h4>
    <ul class="list-inline">
      {% for start, end in slots %}
       <li class="list-inline-item border rounded p-2 m-1">
        <a href="https://wa.me/{{teacher.phone}}?text=Olá, gostaria de agendar o horário do dia {{ start.strftime('%Y-%m-%d %H:%M') | urlencode }}" 
          target="_blank" 
          class="btn">
          {{ start|dateformat }} - {{ end|dateformat }}
        </a>
      </li>
      {% endfor %}
      {% if not slots %}
        <li>No free time</li>
      {% endif %}
    </ul>
  {% endfor %}
</div>
{% endif %}
{% endblock %}
